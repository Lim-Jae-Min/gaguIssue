<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC   "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ko.gagu.issue.dao.BoardDAO">
	<insert id="insertBoard" parameterType="ko.gagu.issue.dto.BoardDTO">
	    INSERT INTO post_list_tb (is_notice, po_title, po_content, idx_file)
	    VALUES (
	        #{is_notice},
	        #{po_title},
	        #{po_content},
	        (SELECT IFNULL(ft.idx_file, NULL)
	         FROM filestore_tb ft
	         WHERE ft.idx_file = #{idx_file})
	    );
	</insert>
	
	<insert id="insertFile" parameterType="java.util.Map">
        INSERT INTO filestore_tb (idx_filetype, idx_ref, origin_name, file_name)
        VALUES (
        	3,
        	#{post_id},
            #{origin_name},
            #{file_name}
        )
    </insert>

	
</mapper>